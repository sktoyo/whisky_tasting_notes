{% extends "base.html" %}

{% block title %}{{ note.name }} - ìœ„ìŠ¤í‚¤ í…Œì´ìŠ¤íŒ… ë…¸íŠ¸{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- ìƒë‹¨: ì œëª© ë° ì•¡ì…˜ ë²„íŠ¼ -->
    <div class="form-section">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 mb-2">{{ note.name }}</h1>
                {% if note.distillery %}
                <p class="text-lg text-gray-600 flex items-center">
                    <span class="mr-2">ğŸ­</span>
                    {{ note.distillery }}
                </p>
                {% endif %}
            </div>
            <div class="flex gap-3">
                <a href="/notes/{{ note.id }}/edit" 
                   class="px-6 py-2.5 bg-[#e5e1dd] hover:bg-[#d6d0c8] text-gray-800 rounded-lg transition-all shadow-sm hover:shadow-md font-medium">
                    âœï¸ ìˆ˜ì •
                </a>
                <a href="/notes/{{ note.id }}/export.txt" 
                   class="px-6 py-2.5 bg-gradient-to-r from-amber-700 to-amber-800 text-white rounded-lg hover:from-amber-800 hover:to-amber-900 transition-all shadow-md hover:shadow-lg font-medium">
                    ğŸ“¥ Export
                </a>
            </div>
        </div>
        
        <!-- ìœ„ìŠ¤í‚¤ ì •ë³´ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- ì¢Œì¸¡: ì •ì‚¬ê°í˜• ì´ë¯¸ì§€ -->
            <div>
                {% if note.image_path %}
                <img src="/uploads/{{ note.image_path }}" alt="{{ note.name }}" 
                     class="image-upload-square mx-auto object-cover rounded-xl shadow-lg">
                {% else %}
                <div class="image-upload-square mx-auto bg-gradient-to-br from-gray-200 to-gray-300 rounded-xl flex items-center justify-center shadow-lg">
                    <div class="text-center">
                        <span class="text-6xl mb-2 block">ğŸ“·</span>
                        <span class="text-gray-500">ì´ë¯¸ì§€ ì—†ìŒ</span>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <!-- ìš°ì¸¡: ìœ„ìŠ¤í‚¤ ì •ë³´ -->
            <div class="space-y-4">
                <div class="bg-gray-50 rounded-lg p-5">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                        <span class="mr-2">â„¹ï¸</span>
                        ìœ„ìŠ¤í‚¤ ì •ë³´
                    </h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        {% if note.age %}
                        <div>
                            <span class="text-sm font-semibold text-gray-600">ìˆ™ì„±ë…„ë„</span>
                            <p class="text-lg font-bold text-gray-900">{{ note.age }}ë…„</p>
                        </div>
                        {% endif %}
                        {% if note.abv %}
                        <div>
                            <span class="text-sm font-semibold text-gray-600">ë„ìˆ˜ (ABV)</span>
                            <p class="text-lg font-bold text-gray-900">{{ note.abv }}%</p>
                        </div>
                        {% endif %}
                        {% if note.cask_type %}
                        <div>
                            <span class="text-sm font-semibold text-gray-600">ìºìŠ¤í¬ ì¢…ë¥˜</span>
                            <p class="text-lg font-bold text-gray-900">{{ note.cask_type }}</p>
                        </div>
                        {% endif %}
                        {% if note.is_single_cask and note.cask_info %}
                        <div>
                            <span class="text-sm font-semibold text-gray-600">ì‹±ê¸€ ìºìŠ¤í¬</span>
                            <p class="text-lg font-bold text-gray-900">{{ note.cask_info }}</p>
                        </div>
                        {% endif %}
                        {% if note.bottle_remaining %}
                        <div>
                            <span class="text-sm font-semibold text-gray-600">ì”ì—¬ëŸ‰</span>
                            <p class="text-lg font-bold text-gray-900">{{ note.bottle_remaining }}</p>
                        </div>
                        {% endif %}
                        {% if note.bottle_opened_at %}
                        <div>
                            <span class="text-sm font-semibold text-gray-600">ê°œë´‰ì¼</span>
                            <p class="text-lg font-bold text-gray-900">{{ note.bottle_opened_at.strftime('%Y-%m-%d') }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Nose -->
    <div class="form-section">
        <h2 class="text-2xl font-bold mb-6 text-gray-900 flex items-center">
            <span class="mr-3">ğŸ‘ƒ</span>
            Nose (í–¥)
        </h2>
        {% if nose_keywords %}
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">í‚¤ì›Œë“œ</h3>
            <div class="flex flex-wrap gap-2">
                {% for kw in nose_keywords %}
                <div class="inline-flex items-center px-4 py-2 bg-blue-100 border border-blue-300 rounded-full text-sm font-medium text-blue-800">
                    <span class="mr-2">{{ get_icon_emoji(kw.icon_key or 'default') }}</span>
                    <span>{{ kw.term }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% if note.nose_comment %}
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">í•œ ì¤„ ì´í‰</h3>
            <div class="bg-blue-50 rounded-lg p-4">
                <p class="text-gray-800 whitespace-pre-wrap leading-relaxed">{{ note.nose_comment }}</p>
            </div>
        </div>
        {% endif %}
        {% if not nose_keywords and not note.nose_comment %}
        <div class="text-center py-8 bg-gray-50 rounded-lg">
            <p class="text-gray-500">ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Palate -->
    <div class="form-section">
        <h2 class="text-2xl font-bold mb-6 text-gray-900 flex items-center">
            <span class="mr-3">ğŸ‘…</span>
            Palate (ë§›)
        </h2>
        {% if palate_keywords %}
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">í‚¤ì›Œë“œ</h3>
            <div class="flex flex-wrap gap-2">
                {% for kw in palate_keywords %}
                <div class="inline-flex items-center px-4 py-2 bg-green-100 border border-green-300 rounded-full text-sm font-medium text-green-800">
                    <span class="mr-2">{{ get_icon_emoji(kw.icon_key or 'default') }}</span>
                    <span>{{ kw.term }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% if note.palate_comment %}
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">í•œ ì¤„ ì´í‰</h3>
            <div class="bg-green-50 rounded-lg p-4">
                <p class="text-gray-800 whitespace-pre-wrap leading-relaxed">{{ note.palate_comment }}</p>
            </div>
        </div>
        {% endif %}
        {% if not palate_keywords and not note.palate_comment %}
        <div class="text-center py-8 bg-gray-50 rounded-lg">
            <p class="text-gray-500">ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Finish -->
    <div class="form-section">
        <h2 class="text-2xl font-bold mb-6 text-gray-900 flex items-center">
            <span class="mr-3">ğŸ’¨</span>
            Finish (ì—¬ìš´)
        </h2>
        {% if finish_keywords %}
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">í‚¤ì›Œë“œ</h3>
            <div class="flex flex-wrap gap-2">
                {% for kw in finish_keywords %}
                <div class="inline-flex items-center px-4 py-2 bg-purple-100 border border-purple-300 rounded-full text-sm font-medium text-purple-800">
                    <span class="mr-2">{{ get_icon_emoji(kw.icon_key or 'default') }}</span>
                    <span>{{ kw.term }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% if note.finish_comment %}
        <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-700 mb-3">í•œ ì¤„ ì´í‰</h3>
            <div class="bg-purple-50 rounded-lg p-4">
                <p class="text-gray-800 whitespace-pre-wrap leading-relaxed">{{ note.finish_comment }}</p>
            </div>
        </div>
        {% endif %}
        {% if not finish_keywords and not note.finish_comment %}
        <div class="text-center py-8 bg-gray-50 rounded-lg">
            <p class="text-gray-500">ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        {% endif %}
    </div>
    
    <!-- ì´í‰ -->
    <div class="form-section">
        <h2 class="text-2xl font-bold mb-6 text-gray-900 flex items-center">
            <span class="mr-3">ğŸ“</span>
            ì´í‰
        </h2>
        {% if note.overall_comment %}
        <div class="bg-gray-50 rounded-lg p-6">
            <p class="text-gray-800 whitespace-pre-wrap leading-relaxed text-lg">{{ note.overall_comment }}</p>
        </div>
        {% else %}
        <div class="text-center py-8 bg-gray-50 rounded-lg">
            <p class="text-gray-500">ì´í‰ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
        {% endif %}
        {% if note.score is not none %}
        <div class="mt-6 flex items-center space-x-4">
            <span class="text-lg font-semibold text-gray-700">ì ìˆ˜:</span>
            <div class="flex items-center space-x-2">
                <span class="inline-flex items-center px-4 py-1.5 rounded-full bg-gradient-to-r from-amber-600 to-amber-700 text-white text-xl font-bold shadow-sm">
                    {{ note.score }}/100
                </span>
            </div>
        </div>
        {% endif %}
    </div>
    
    <!-- ë©”íƒ€ ì •ë³´ -->
    <div class="form-section bg-gray-50">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center text-sm text-gray-600">
            <div class="mb-2 sm:mb-0">
                <span class="font-semibold">ì‘ì„±ì¼:</span>
                <span class="ml-2">{{ note.created_at.strftime('%Yë…„ %mì›” %dì¼ %H:%M') }}</span>
            </div>
            {% if note.updated_at != note.created_at %}
            <div>
                <span class="font-semibold">ìˆ˜ì •ì¼:</span>
                <span class="ml-2">{{ note.updated_at.strftime('%Yë…„ %mì›” %dì¼ %H:%M') }}</span>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

